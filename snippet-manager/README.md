# ä»£ç ç‰‡æ®µ & æç¤ºè¯ç®¡ç†å™¨

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ä»£ç ç‰‡æ®µå’ŒAIæç¤ºè¯ç®¡ç†å·¥å…·ï¼Œæ”¯æŒåˆ†ç±»ã€æœç´¢ã€æ ‡ç­¾ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆéƒ¨ç½²ï¼š

```bash
wget -O install.sh https://raw.githubusercontent.com/sea-t/ps_html_public/main/snippet-manager/install.sh && bash install.sh
```

æˆ–ä½¿ç”¨ curlï¼š

```bash
curl -fsSL https://raw.githubusercontent.com/sea-t/ps_html_public/main/snippet-manager/install.sh | bash
```

éƒ¨ç½²å®Œæˆåè®¿é—® `http://YOUR_SERVER_IP` å³å¯ä½¿ç”¨ã€‚

ğŸ“– **è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [QUICK-DEPLOY.md](./QUICK-DEPLOY.md)

### å…¶ä»–å®‰è£…æ–¹å¼

- ğŸ“¦ [Docker éƒ¨ç½²](./DOCKER.md) - ä½¿ç”¨ Docker Compose æ‰‹åŠ¨éƒ¨ç½²
- ğŸ’» [æœ¬åœ°å¼€å‘](./DEVELOPMENT.md) - è®¾ç½®å¼€å‘ç¯å¢ƒ
- ğŸ”§ [å®Œæ•´å®‰è£…æŒ‡å—](./INSTALL.md) - è¯¦ç»†çš„å®‰è£…æ­¥éª¤

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“ **ä»£ç ç‰‡æ®µç®¡ç†** - æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ç‰‡æ®µå­˜å‚¨
- ğŸ’¬ **æç¤ºè¯ç®¡ç†** - AIæç¤ºè¯æ¨¡æ¿çš„é›†ä¸­ç®¡ç†
- ğŸ” **æ™ºèƒ½æœç´¢** - æ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€æè¿°çš„å…¨æ–‡æœç´¢
- ğŸ·ï¸ **æ ‡ç­¾åˆ†ç±»** - çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿï¼Œæ–¹ä¾¿åˆ†ç±»å’Œæ£€ç´¢
- ğŸ“‹ **ä¸€é”®å¤åˆ¶** - å¿«é€Ÿå¤åˆ¶ç‰‡æ®µå†…å®¹åˆ°å‰ªè´´æ¿
- ğŸ¨ **ä»£ç é«˜äº®** - ä½¿ç”¨ highlight.js æä¾›ç¾è§‚çš„ä»£ç é«˜äº®
- ğŸ’¾ **æ•°æ®æŒä¹…åŒ–** - åŸºäº SQLite æ•°æ®åº“å­˜å‚¨

### æŠ€æœ¯ç‰¹æ€§
- å‰åç«¯åˆ†ç¦»æ¶æ„
- RESTful API è®¾è®¡
- å“åº”å¼ç•Œé¢è®¾è®¡
- å®æ—¶æ•°æ®ç»Ÿè®¡

## æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: Flask 3.0
- **æ•°æ®åº“**: SQLite + SQLAlchemy
- **è·¨åŸŸ**: Flask-CORS

### å‰ç«¯
- **æ¡†æ¶**: Vue 3
- **UIç»„ä»¶**: Element Plus
- **æ„å»ºå·¥å…·**: Vite
- **HTTPå®¢æˆ·ç«¯**: Axios
- **ä»£ç é«˜äº®**: highlight.js

## é¡¹ç›®ç»“æ„

```
snippet-manager/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ __init__.py     # Flaskåº”ç”¨åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ models.py       # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â””â”€â”€ routes.py       # APIè·¯ç”±
â”‚   â”œâ”€â”€ instance/           # æ•°æ®åº“æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ run.py              # å¯åŠ¨æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”‚   â””â”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚
â””â”€â”€ frontend/               # å‰ç«¯ä»£ç 
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/     # Vueç»„ä»¶
    â”‚   â”‚   â”œâ”€â”€ Sidebar.vue         # ä¾§è¾¹æ 
    â”‚   â”‚   â”œâ”€â”€ SnippetList.vue     # ç‰‡æ®µåˆ—è¡¨
    â”‚   â”‚   â”œâ”€â”€ SnippetDialog.vue   # ç¼–è¾‘å¯¹è¯æ¡†
    â”‚   â”‚   â””â”€â”€ ViewDialog.vue      # æŸ¥çœ‹å¯¹è¯æ¡†
    â”‚   â”œâ”€â”€ api/            # APIæ¥å£
    â”‚   â”‚   â””â”€â”€ snippets.js
    â”‚   â”œâ”€â”€ App.vue         # ä¸»åº”ç”¨ç»„ä»¶
    â”‚   â””â”€â”€ main.js         # åº”ç”¨å…¥å£
    â”œâ”€â”€ index.html
    â”œâ”€â”€ vite.config.js
    â””â”€â”€ package.json
```

## å¿«é€Ÿå¼€å§‹

### âš¡ è¶…å¿«é€Ÿå¯åŠ¨ï¼ˆä½¿ç”¨é¢„æ„å»ºé•œåƒï¼‰

**æ— éœ€æ„å»ºï¼Œç›´æ¥è¿è¡Œï¼** é•œåƒå·²åœ¨ GitHub Actions è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° GitHub Container Registryã€‚

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/sea-t/ps_html_public.git
cd ps_html_public/snippet-manager

# 2. ä¸€é”®å¯åŠ¨ï¼ˆè‡ªåŠ¨æ‹‰å–é•œåƒï¼‰
./docker-run.sh
```

è®¿é—®ï¼šhttp://localhost

**é•œåƒä¿¡æ¯ï¼š**
- å‰ç«¯: `ghcr.io/sea-t/ps_html_public/snippet-manager-frontend:latest`
- åç«¯: `ghcr.io/sea-t/ps_html_public/snippet-manager-backend:latest`

**è¯¦ç»†è¯´æ˜**: æŸ¥çœ‹ [INSTALL.md](./INSTALL.md) ğŸ“–

---

### ğŸ³ Docker æœ¬åœ°æ„å»ºéƒ¨ç½²

å¦‚æœä½ æƒ³ä»æºç æ„å»ºé•œåƒï¼š

**ç”Ÿäº§ç¯å¢ƒï¼š**
```bash
./docker-start.sh
```

**å¼€å‘ç¯å¢ƒï¼š**
```bash
./docker-start-dev.sh
```

**è®¿é—®åº”ç”¨ï¼š**
- ç”Ÿäº§ç¯å¢ƒ: http://localhost
- å¼€å‘ç¯å¢ƒ: http://localhost:3000

**æ·»åŠ ç¤ºä¾‹æ•°æ®ï¼š**
```bash
./docker-seed.sh
```

**è¯¦ç»†æ–‡æ¡£**: æŸ¥çœ‹ [DOCKER.md](./DOCKER.md)

---

### ğŸ“¦ ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²

å¦‚æœä¸ä½¿ç”¨ Dockerï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨å®‰è£…ï¼š

#### åç«¯è®¾ç½®

1. è¿›å…¥åç«¯ç›®å½•ï¼š
```bash
cd snippet-manager/backend
```

2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰ï¼š
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

3. å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

4. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰ï¼š
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®è‡ªå®šä¹‰é…ç½®
```

5. è¿è¡Œåç«¯æœåŠ¡ï¼š
```bash
python run.py
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:5000` å¯åŠ¨

### å‰ç«¯è®¾ç½®

1. è¿›å…¥å‰ç«¯ç›®å½•ï¼š
```bash
cd snippet-manager/frontend
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
# æˆ–
yarn install
# æˆ–
pnpm install
```

3. è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
# æˆ–
yarn dev
# æˆ–
pnpm dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### ç”Ÿäº§æ„å»º

å‰ç«¯æ„å»ºï¼š
```bash
cd frontend
npm run build
```

æ„å»ºäº§ç‰©å°†åœ¨ `frontend/dist` ç›®å½•ä¸‹ã€‚

## API æ¥å£

### ç‰‡æ®µç›¸å…³

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/api/snippets` | è·å–æ‰€æœ‰ç‰‡æ®µï¼ˆæ”¯æŒæŸ¥è¯¢å‚æ•°ï¼‰ |
| GET | `/api/snippets/:id` | è·å–å•ä¸ªç‰‡æ®µ |
| POST | `/api/snippets` | åˆ›å»ºæ–°ç‰‡æ®µ |
| PUT | `/api/snippets/:id` | æ›´æ–°ç‰‡æ®µ |
| DELETE | `/api/snippets/:id` | åˆ é™¤ç‰‡æ®µ |
| GET | `/api/tags` | è·å–æ‰€æœ‰æ ‡ç­¾ |
| GET | `/api/stats` | è·å–ç»Ÿè®¡ä¿¡æ¯ |

### æŸ¥è¯¢å‚æ•°

- `type`: ç‰‡æ®µç±»å‹ï¼ˆ`code` æˆ– `prompt`ï¼‰
- `search`: æœç´¢å…³é”®è¯
- `tag`: æ ‡ç­¾è¿‡æ»¤

### è¯·æ±‚ç¤ºä¾‹

åˆ›å»ºä»£ç ç‰‡æ®µï¼š
```json
POST /api/snippets
{
  "title": "å¿«é€Ÿæ’åº",
  "content": "def quick_sort(arr):\n    ...",
  "description": "Pythonå®ç°çš„å¿«é€Ÿæ’åºç®—æ³•",
  "snippet_type": "code",
  "language": "python",
  "tags": ["ç®—æ³•", "æ’åº"]
}
```

åˆ›å»ºæç¤ºè¯ï¼š
```json
POST /api/snippets
{
  "title": "æ–‡ç« æ‘˜è¦æç¤ºè¯",
  "content": "è¯·ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆä¸€ä¸ªç®€æ´çš„æ‘˜è¦...",
  "description": "ç”¨äºç”Ÿæˆæ–‡ç« æ‘˜è¦çš„AIæç¤ºè¯",
  "snippet_type": "prompt",
  "tags": ["AI", "æ‘˜è¦"]
}
```

## ä½¿ç”¨æŒ‡å—

### æ·»åŠ ç‰‡æ®µ

1. ç‚¹å‡»å·¦ä¾§è¾¹æ çš„"æ·»åŠ ä»£ç ç‰‡æ®µ"æˆ–"æ·»åŠ æç¤ºè¯"æŒ‰é’®
2. å¡«å†™æ ‡é¢˜ã€æè¿°ã€å†…å®¹ç­‰ä¿¡æ¯
3. é€‰æ‹©ç¼–ç¨‹è¯­è¨€ï¼ˆä»…ä»£ç ç‰‡æ®µï¼‰
4. æ·»åŠ æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
5. ç‚¹å‡»"ä¿å­˜"

### æœç´¢ç‰‡æ®µ

- ä½¿ç”¨å·¦ä¾§æœç´¢æ¡†è¾“å…¥å…³é”®è¯
- é€šè¿‡ç±»å‹è¿‡æ»¤ï¼ˆå…¨éƒ¨/ä»£ç ç‰‡æ®µ/æç¤ºè¯ï¼‰
- ç‚¹å‡»æ ‡ç­¾è¿›è¡Œç­›é€‰

### æŸ¥çœ‹å’Œå¤åˆ¶

1. ç‚¹å‡»ç‰‡æ®µå¡ç‰‡ä¸Šçš„"æŸ¥çœ‹"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­æŸ¥çœ‹å®Œæ•´å†…å®¹
3. ç‚¹å‡»"å¤åˆ¶"æŒ‰é’®å°†å†…å®¹å¤åˆ¶åˆ°å‰ªè´´æ¿

### ç¼–è¾‘å’Œåˆ é™¤

- ç‚¹å‡»ç‰‡æ®µå¡ç‰‡ä¸Šçš„"ç¼–è¾‘"æŒ‰é’®è¿›è¡Œä¿®æ”¹
- ç‚¹å‡»"åˆ é™¤"æŒ‰é’®åˆ é™¤ç‰‡æ®µï¼ˆéœ€ç¡®è®¤ï¼‰

## æ•°æ®æ¨¡å‹

### Snippetï¼ˆç‰‡æ®µï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | Integer | ä¸»é”® |
| title | String(200) | æ ‡é¢˜ |
| content | Text | å†…å®¹ |
| description | Text | æè¿° |
| snippet_type | String(20) | ç±»å‹ï¼ˆcode/promptï¼‰ |
| language | String(50) | ç¼–ç¨‹è¯­è¨€ |
| tags | String(500) | æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰ |
| created_at | DateTime | åˆ›å»ºæ—¶é—´ |
| updated_at | DateTime | æ›´æ–°æ—¶é—´ |

## éƒ¨ç½²æ–¹å¼å¯¹æ¯”

| ç‰¹æ€§ | Docker éƒ¨ç½² | ä¼ ç»Ÿéƒ¨ç½² |
|------|------------|---------|
| ç¯å¢ƒé…ç½® | âœ… è‡ªåŠ¨é…ç½® | âŒ æ‰‹åŠ¨é…ç½® |
| ä¾èµ–ç®¡ç† | âœ… å®¹å™¨åŒ–éš”ç¦» | âŒ å¯èƒ½å†²çª |
| ä¸€é”®å¯åŠ¨ | âœ… æ”¯æŒ | âŒ å¤šæ­¥éª¤ |
| è·¨å¹³å° | âœ… å®Œå…¨ä¸€è‡´ | âš ï¸ å¯èƒ½å·®å¼‚ |
| æ•°æ®æŒä¹…åŒ– | âœ… Volume | âœ… æœ¬åœ°æ–‡ä»¶ |
| ç”Ÿäº§å°±ç»ª | âœ… åŒ…å« Nginx | âš ï¸ éœ€é¢å¤–é…ç½® |
| æ¨èåœºæ™¯ | ç”Ÿäº§ç¯å¢ƒã€å¿«é€Ÿä½“éªŒ | å¼€å‘è°ƒè¯• |

## å¼€å‘è®¡åˆ’

**å·²å®Œæˆï¼š**
- [x] å®Œæ•´çš„å‰åç«¯åŠŸèƒ½
- [x] Docker å®¹å™¨åŒ–éƒ¨ç½²
- [x] GitHub Actions CI/CD è‡ªåŠ¨æ„å»º
- [x] é¢„æ„å»ºé•œåƒå‘å¸ƒåˆ° GitHub Container Registry
- [x] ç”Ÿäº§ç¯å¢ƒ Nginx é…ç½®
- [x] å¼€å‘ç¯å¢ƒçƒ­é‡è½½æ”¯æŒ
- [x] å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯
- [x] æ•°æ®æŒä¹…åŒ–
- [x] ä¸€é”®å¯åŠ¨è„šæœ¬

**è®¡åˆ’ä¸­ï¼š**
- [ ] æ”¯æŒ Markdown æ ¼å¼
- [ ] ç‰‡æ®µåˆ†äº«åŠŸèƒ½
- [ ] å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½ï¼ˆJSON/CSVï¼‰
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] ç‰‡æ®µç‰ˆæœ¬æ§åˆ¶
- [ ] æ”¶è—å¤¹åŠŸèƒ½
- [ ] æš—è‰²ä¸»é¢˜
- [ ] Kubernetes éƒ¨ç½²é…ç½®
- [ ] å¤šè¯­è¨€ç•Œé¢

## æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| ğŸ“– [README.md](./README.md) | é¡¹ç›®ä»‹ç»å’ŒåŠŸèƒ½è¯´æ˜ | äº†è§£é¡¹ç›® |
| âš¡ [INSTALL.md](./INSTALL.md) | é¢„æ„å»ºé•œåƒå¿«é€Ÿå®‰è£… | **æ¨èé¦–é€‰** â­ |
| ğŸ³ [DOCKER.md](./DOCKER.md) | Docker å®Œæ•´éƒ¨ç½²æŒ‡å— | æ·±å…¥äº†è§£ Docker |
| ğŸ“‹ [DOCKER-CHEATSHEET.md](./DOCKER-CHEATSHEET.md) | Docker å¿«é€Ÿå‚è€ƒ | æ—¥å¸¸ä½¿ç”¨ |
| ğŸš€ [QUICKSTART.md](./QUICKSTART.md) | ä¼ ç»Ÿæ–¹å¼å¿«é€Ÿå¼€å§‹ | æ‰‹åŠ¨éƒ¨ç½² |
| ğŸ’» [DEVELOPMENT.md](./DEVELOPMENT.md) | å¼€å‘æ–‡æ¡£å’Œè§„èŒƒ | äºŒæ¬¡å¼€å‘ |

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## æˆªå›¾

ï¼ˆæ­¤å¤„å¯æ·»åŠ åº”ç”¨æˆªå›¾ï¼‰

---

å¼€å‘æ—¶é—´ï¼š2024å¹´
æŠ€æœ¯æ”¯æŒï¼šVue 3 + Flask
